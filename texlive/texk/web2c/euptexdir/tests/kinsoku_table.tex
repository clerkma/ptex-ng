%#!uptex -ini
%\let\dump\relax
%\input plain

\newcount\fuga\newcount\dflt
\fuga="3300
\iffalse
  \global\let\prebreakpenalty=\inhibitxspcode
  \dflt=3
\else
  \dflt=0
\fi

\scrollmode
\newcount\hoge\hoge="3000
\loop\ifnum\hoge<\fuga
  \message{\the\hoge}\prebreakpenalty\hoge=2
  \advance\hoge 3\relax \repeat

\message{<\the\prebreakpenalty"3003, \the\prebreakpenalty"4000>}% 2, D
{
  \prebreakpenalty"3003=\dflt\relax
  \global\prebreakpenalty"4000=1\relax% error
\message{<\the\prebreakpenalty"3003, \the\prebreakpenalty"4000>}% D, D
}

\message{<\the\prebreakpenalty"3003, \the\prebreakpenalty"4000>}% 2, D

{
  \global\prebreakpenalty"3003=\dflt\relax
  \prebreakpenalty"4000=1\relax% no error
\message{<\the\prebreakpenalty"3003, \the\prebreakpenalty"4000>}% D, 1
}
\message{<\the\prebreakpenalty"3003, \the\prebreakpenalty"4000>}% D, D

\prebreakpenalty"4000=1\relax% no error

\message{<\the\prebreakpenalty"3003, \the\prebreakpenalty"4000,
  \the\prebreakpenalty"3549>}% D, 1, D

\prebreakpenalty"4000=\dflt\relax

\prebreakpenalty"3549=1\relax% no error

\message{<\the\prebreakpenalty"3003, \the\prebreakpenalty"4000,
  \the\prebreakpenalty"3549>}% D, D, 1


\end

